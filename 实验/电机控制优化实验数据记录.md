# 电机控制优化实验数据记录

[TOC]

## 代码版本 1.0

`PID_PI_Compare-1.0.ino`

`PID_PI_Compare-1.0.py`

### 数据记录1

`code_1_data_1.csv`

控制器步长：

```c++
const float kp_values[] = {0.08, 0.04, 0.06, 0.08, 0.1, 0.12, 0.14}; // P增益测试值
const float ki_values[] = {0.091, 0.06, 0.07, 0.08, 0.09, 0.1, 0.11, 0.12}; // I增益测试值
const float kd_values[] = {0.1, 0.05, 0.1, 0.15, 0.2}; // D增益测试值
```
## 代码版本 2.0

`PID_PI_Compare-1.1.ino`弃用
`PID_PI_Compare-2.0.ino`

### 控制器步长1:

```c++
const float kp_values[] = {0.08, 0.04, 0.06, 0.1, 0.12, 0.14}; // P增益测试值
const float ki_values[] = {0.091, 0.06, 0.07, 0.08, 0.09, 0.1, 0.11, 0.12}; // I增益测试值
const float kd_values[] = {0.1, 0.05, 0.15, 0.2}; // D增益测试值
```

#### 数据记录1

处理程序:`PID_PI_Compare-1.2.py`

数据文件:`code_1.1_data_1.csv` 弃用
`code_2_data_1.csv`

处理结果:
```txt
运动阶段: ACCELERATE 的最佳参数组合:
选择最佳参数 - 控制类型: PID, 阶段: ACCELERATE, 数据量: 192

控制类型: PID
 ParamID  k_p   k_i  k_d  OvershootPercentage  SteadyStateError  PerformanceScore  Rank
     132 0.12 0.091 0.20             8.368442         10.063630         18.432072     1
     179 0.14 0.090 0.15             8.050829         10.398895         18.449724     2
      12 0.08 0.070 0.20             3.472673         15.058443         18.531116     3
选择最佳参数 - 控制类型: PI, 阶段: ACCELERATE, 数据量: 16

控制类型: PI
 ParamID  k_p   k_i  k_d  OvershootPercentage  SteadyStateError  PerformanceScore  Rank
       4 0.08 0.080  NaN             8.427638         17.282344         25.709982     1
       2 0.08 0.060  NaN             8.743218         19.733883         28.477101     2
       1 0.08 0.091  NaN            10.340882         19.825582         30.166464     3

运动阶段: DECELERATE 的最佳参数组合:
选择最佳参数 - 控制类型: PID, 阶段: DECELERATE, 数据量: 192

控制类型: PID
 ParamID  k_p   k_i  k_d  OvershootPercentage  SteadyStateError  PerformanceScore  Rank
      24 0.08 0.100 0.20            18.346453          9.049194         27.395647     1
     132 0.12 0.091 0.20            18.396751         10.329455         28.726206     2
     171 0.14 0.070 0.15            15.244265         13.820992         29.065257     3
选择最佳参数 - 控制类型: PI, 阶段: DECELERATE, 数据量: 16

控制类型: PI
 ParamID  k_p   k_i  k_d  OvershootPercentage  SteadyStateError  PerformanceScore  Rank
       9 0.04 0.091  NaN            25.165833         14.137105         39.302938     1
       3 0.08 0.070  NaN            20.407730         19.086801         39.494531     2
       5 0.08 0.090  NaN            20.976823         19.791606         40.768429     3

运动阶段: STATIONARY 的最佳参数组合:
选择最佳参数 - 控制类型: PID, 阶段: STATIONARY, 数据量: 0
未找到 PID 控制类型在 STATIONARY 阶段的最佳参数组合。
选择最佳参数 - 控制类型: PI, 阶段: STATIONARY, 数据量: 0
未找到 PI 控制类型在 STATIONARY 阶段的最佳参数组合。

运动阶段: SUDDEN_ACCELERATE 的最佳参数组合:
选择最佳参数 - 控制类型: PID, 阶段: SUDDEN_ACCELERATE, 数据量: 192

控制类型: PID
 ParamID  k_p  k_i  k_d  OvershootPercentage  SteadyStateError  PerformanceScore  Rank
     165 0.14 0.06 0.10            15.953015         10.432977         26.385992     1
     168 0.14 0.06 0.20            14.493010         11.956432         26.449442     2
     134 0.12 0.06 0.05            15.855755         12.225011         28.080766     3
选择最佳参数 - 控制类型: PI, 阶段: SUDDEN_ACCELERATE, 数据量: 16

控制类型: PI
 ParamID  k_p  k_i  k_d  OvershootPercentage  SteadyStateError  PerformanceScore  Rank
      10 0.04 0.06  NaN            31.210815         11.130943         42.341758     1
       2 0.08 0.06  NaN            34.887080         11.131310         46.018390     2
       3 0.08 0.07  NaN            37.723890          9.027515         46.751405     3

运动阶段: SUDDEN_STOP 的最佳参数组合:
选择最佳参数 - 控制类型: PID, 阶段: SUDDEN_STOP, 数据量: 0
未找到 PID 控制类型在 SUDDEN_STOP 阶段的最佳参数组合。
选择最佳参数 - 控制类型: PI, 阶段: SUDDEN_STOP, 数据量: 0
未找到 PI 控制类型在 SUDDEN_STOP 阶段的最佳参数组合。
```

#### 数据记录2

处理程序:`PID_PI_Compare-1.2.py`

数据文件:`code_2_data_2.csv`

```txt
1. 运动阶段: ACCELERATE 的最佳参数组合:
选择最佳参数 - 控制类型: PID, 阶段: ACCELERATE, 数据量: 192

控制类型: PID
 ParamID  k_p  k_i  k_d  OvershootPercentage  SteadyStateError  PerformanceScore  Rank
     135 0.12 0.06 0.15             2.734284         14.034985         16.769269     1
     101 0.10 0.06 0.10             3.685707         14.754338         18.440045     2
      74 0.06 0.07 0.05             6.318285         12.138856         18.457141     3
选择最佳参数 - 控制类型: PI, 阶段: ACCELERATE, 数据量: 48

控制类型: PI
 ParamID  k_p  k_i  k_d  OvershootPercentage  SteadyStateError  PerformanceScore  Rank
      44 0.14 0.08  NaN             3.602562         14.101535         17.704097     1
      26 0.10 0.06  NaN             1.943349         17.839901         19.783250     2
      10 0.04 0.06  NaN             5.330952         15.903814         21.234766     3

2. 运动阶段: DECELERATE 的最佳参数组合:
选择最佳参数 - 控制类型: PID, 阶段: DECELERATE, 数据量: 192

控制类型: PID
 ParamID  k_p  k_i  k_d  OvershootPercentage  SteadyStateError  PerformanceScore  Rank
      92 0.06 0.11 0.20            14.546555         12.276568         26.823122     1
      13 0.08 0.08 0.10            18.774357          9.577581         28.351938     2
     150 0.12 0.10 0.05            16.250730         12.193415         28.444146     3
选择最佳参数 - 控制类型: PI, 阶段: DECELERATE, 数据量: 48

控制类型: PI
 ParamID  k_p  k_i  k_d  OvershootPercentage  SteadyStateError  PerformanceScore  Rank
      45 0.14 0.09  NaN            18.033697         15.847960         33.881657     1
      28 0.10 0.08  NaN            21.249508         13.346590         34.596098     2
      29 0.10 0.09  NaN            22.492523         13.084672         35.577195     3

3. 运动阶段: STATIONARY 的最佳参数组合:
选择最佳参数 - 控制类型: PID, 阶段: STATIONARY, 数据量: 0
未找到 PID 控制类型在 STATIONARY 阶段的最佳参数组合。
选择最佳参数 - 控制类型: PI, 阶段: STATIONARY, 数据量: 0
未找到 PI 控制类型在 STATIONARY 阶段的最佳参数组合。

4. 运动阶段: SUDDEN_ACCELERATE 的最佳参数组合:
选择最佳参数 - 控制类型: PID, 阶段: SUDDEN_ACCELERATE, 数据量: 192

控制类型: PID
 ParamID  k_p  k_i  k_d  OvershootPercentage  SteadyStateError  PerformanceScore  Rank
     168 0.14 0.06 0.20            16.713025         10.499185         27.212210     1
     171 0.14 0.07 0.15            16.642270         10.715706         27.357976     2
     135 0.12 0.06 0.15            15.397290         13.017249         28.414539     3
选择最佳参数 - 控制类型: PI, 阶段: SUDDEN_ACCELERATE, 数据量: 48

控制类型: PI
 ParamID  k_p  k_i  k_d  OvershootPercentage  SteadyStateError  PerformanceScore  Rank
      34 0.12 0.06  NaN            21.891020         14.612854         36.503874     1
      42 0.14 0.06  NaN            25.223645         11.400900         36.624545     2
       2 0.08 0.06  NaN            29.091735          8.041273         37.133008     3

5. 运动阶段: SUDDEN_STOP 的最佳参数组合:
选择最佳参数 - 控制类型: PID, 阶段: SUDDEN_STOP, 数据量: 0
未找到 PID 控制类型在 SUDDEN_STOP 阶段的最佳参数组合。
选择最佳参数 - 控制类型: PI, 阶段: SUDDEN_STOP, 数据量: 0
未找到 PI 控制类型在 SUDDEN_STOP 阶段的最佳参数组合。
```

### 控制器步长2:

```c++
const float kp_values[] = {0.08, 0.09, 0.1, 0.11, 0.12, 0.13, 0.14}; // P增益测试值
const float ki_values[] = {0.07, 0.075, 0.08, 0.085, 0.09, 0.095, 0.1, 0.105}; // I增益测试值
const float kd_values[] = {0.15, 0.175, 0.2, 0.225, 0.25}; // D增益测试值
```

#### 数据记录1

处理程序:`PID_PI_Compare-2.0.py`

数据文件:`code_2_data_3.csv`

各阶段权重:
- ACCELERATE: 25%
- DECELERATE: 20%
- STATIONARY: 5%
- SUDDEN_ACCELERATE: 40%
- SUDDEN_STOP: 10%

```txt
综合排名（前 20 名）:
 ParamID ControlType  k_p   k_i   k_d  WeightedPerformanceScore  Rank
     241         PID 0.14 0.070 0.150                 23.474151     1
     210         PID 0.13 0.075 0.250                 23.762101     2
     247         PID 0.14 0.075 0.175                 23.770278     3
     245         PID 0.14 0.070 0.250                 24.347295     4
     202         PID 0.13 0.070 0.175                 24.702514     5
     165         PID 0.12 0.070 0.250                 24.923093     6
     123         PID 0.11 0.070 0.200                 25.321222     7
     265         PID 0.14 0.090 0.250                 25.924558     8
     243         PID 0.14 0.070 0.200                 25.948866     9
     242         PID 0.14 0.070 0.175                 26.241827    10
     180         PID 0.12 0.085 0.250                 26.567713    11
     251         PID 0.14 0.080 0.150                 26.696590    12
     244         PID 0.14 0.070 0.225                 26.972870    13
     122         PID 0.11 0.070 0.175                 27.103865    14
     207         PID 0.13 0.075 0.175                 27.355472    15
     248         PID 0.14 0.075 0.200                 27.548410    16
     206         PID 0.13 0.075 0.150                 27.691601    17
     125         PID 0.11 0.070 0.250                 27.809652    18
     203         PID 0.13 0.070 0.200                 27.874813    19
     170         PID 0.12 0.075 0.250                 28.138752    20

参数出现次数统计（前 20% 综合排名）:

参数 k_p 的出现次数:
k_p
0.08     1
0.09     3
0.10     5
0.11     6
0.12    13
0.13    19
0.14    20

参数 k_i 的出现次数:
k_i
0.070    21
0.075    20
0.080    11
0.085     7
0.090     6
0.100     2

参数 k_d 的出现次数:
k_d
0.150    11
0.175    12
0.200    14
0.225    11
0.250    19
```

图像文件:folder`code_2_data_3_processed`